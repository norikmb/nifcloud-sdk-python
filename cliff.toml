# git-cliff configuration for automatic changelog generation
# see https://github.com/orhun/git-cliff

[changelog]
# Changelog template
body = """
{%- for release in releases -%}
## [{{ release.version }}] - {{ release.date }}

{%- if release.notes %}
{{ release.notes }}
{%- endif %}

{%- for group, commits in release.groups | sort(attribute="title") | group_by(attribute="group") %}

### {{ group }}

{%- for commit in commits %}
- {%- if commit.scope %} **{{ commit.scope }}:**{% endif %} {{ commit.message }}{%- if commit.breaking %} - **BREAKING**{%- endif %}
{%- endfor %}
{%- endfor %}

{%- endfor %}

---

*Changelog generated by [git-cliff](https://github.com/orhun/git-cliff)*
"""

# Changelog footer
footer = """
<!-- generated by git-cliff -->"""

trim = true

[git]
# Parse conventional commits
conventional_commits = true
# Filter commits by type(s)
filter_commits = false
# Ignore commits that don't start with a conventional commit type
ignore_unknown_tags = true
# Sort commits by field
sort_commits = "oldest"
# Protection to prevent overwriting the CHANGELOG.md file unintentionally
protected_patterns = ["CHANGELOG.md"]

[commit_parsers]
# Type definitions
message = "^feat"
group = "Features"

[[commit_parsers]]
message = "^fix"
group = "Bug Fixes"

[[commit_parsers]]
message = "^perf"
group = "Performance"

[[commit_parsers]]
message = "^refactor"
group = "Refactoring"

[[commit_parsers]]
message = "^doc"
group = "Documentation"

[[commit_parsers]]
message = "^docs"
group = "Documentation"

[[commit_parsers]]
message = "^style"
group = "Styling"

[[commit_parsers]]
message = "^test"
group = "Testing"

[[commit_parsers]]
message = "^ci"
group = "CI/CD"

[[commit_parsers]]
message = "^chore"
skip = true

[[commit_parsers]]
message = "^Merge"
skip = true

[git.commit_preprocessors]
# Remove the issue prefix from commit messages
pattern = "\(#([0-9]+)\)"
replace = "([#${1}](https://github.com/norikmb/nifcloud-sdk-python/issues/${1}))"
